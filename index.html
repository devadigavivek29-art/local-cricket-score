<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gully Cricket Tracker</title>

<style>
:root{
  --bg:#0b1220;
  --card:#121c33;
  --text:#ffffff;
  --muted:#9aa4bf;
}

*{box-sizing:border-box;font-family:system-ui,-apple-system;}

body{
  margin:0;
  background:linear-gradient(180deg,#050914,#0b1220);
  color:var(--text);
  min-height:100vh;
  display:flex;
  justify-content:center;
}

.app{
  width:100%;
  max-width:430px;
  padding:16px;
  display:flex;
  flex-direction:column;
  min-height:100vh;
}

.card{
  background:var(--card);
  border-radius:16px;
  padding:16px;
  margin-bottom:14px;
  box-shadow:0 10px 25px rgba(0,0,0,.4);
}

/* HEADER */
.score{
  text-align:center;
}
.score h2{
  margin:0;
  font-size:22px;
}
.score h1{
  margin:6px 0;
  font-size:44px;
}
.score p{
  margin:0;
  color:var(--muted);
}

/* OVER LINE */
.over-line{
  display:flex;
  gap:6px;
  overflow-x:auto;
  justify-content:center;
  padding-top:6px;
}
.ball{
  min-width:38px;
  height:38px;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  background:#1d294a;
}

/* BUTTON GRID */
.controls{
  flex:1;
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:12px;
}

.btn{
  height:62px;
  border:none;
  border-radius:14px;
  font-size:20px;
  font-weight:700;
  cursor:pointer;
}

/* Button colors */
.run{background:#e5e7eb;color:#000;}
.four{background:#facc15;color:#000;}
.six{background:#22c55e;color:#000;}
.wide{background:#a855f7;color:#fff;}
.wicket{background:#ef4444;color:#fff;}

.undo{
  grid-column:1/-1;
  background:#374151;
  color:#fff;
  height:58px;
}

/* FOOTER */
.footer{
  text-align:center;
  color:#6b7280;
  font-size:13px;
  padding-bottom:6px;
}
</style>
</head>

<body>
<div class="app">

  <div class="card score">
    <h2 id="teamName">Batting Team</h2>
    <h1 id="score">0 / 0</h1>
    <p id="over">Over: 0.0</p>
    <p id="target"></p>
  </div>

  <div class="card">
    <p style="text-align:center;margin:0 0 8px;color:#9aa4bf;">This Over</p>
    <div class="over-line" id="overLine"></div>
  </div>

  <div class="controls">
    <button class="btn run" onclick="addRun(0)">0</button>
    <button class="btn run" onclick="addRun(1)">1</button>
    <button class="btn run" onclick="addRun(2)">2</button>

    <button class="btn run" onclick="addRun(3)">3</button>
    <button class="btn four" onclick="addRun(4)">4</button>
    <button class="btn run" onclick="addRun(5)">5</button>

    <button class="btn six" onclick="addRun(6)">6</button>
    <button class="btn wide" onclick="addWide()">Wd</button>
    <button class="btn wicket" onclick="addWicket()">W</button>

    <button class="btn undo" onclick="undo()">Undo</button>
  </div>

  <div class="footer">
    Offline • Dark Mode • Gully Cricket
  </div>

</div>

<script>
let runs=0,wickets=0,balls=0,overBalls=[];
let innings=1,target=null;
let players=5; // last man standing logic
let history=[];

function update(){
  document.getElementById("score").innerText=`${runs} / ${wickets}`;
  document.getElementById("over").innerText=`Over: ${Math.floor(balls/6)}.${balls%6}`;
  document.getElementById("target").innerText=
    (innings===2)?`Need ${target-runs} in ${((totalOvers*6)-balls)} balls`:"";
}

function addBall(label,legal=true){
  history.push(JSON.stringify({runs,wickets,balls,overBalls:[...overBalls],innings,target}));
  if(legal) balls++;
  overBalls.push(label);
  if(overBalls.filter(b=>b!=="Wd").length===6) overBalls=[];
  renderOver();
  update();
  checkEnd();
}

function addRun(n){
  runs+=n;
  addBall(n);
}

function addWide(){
  runs+=1;
  addBall("Wd",false);
}

function addWicket(){
  if(wickets < players-1){
    wickets++;
    addBall("W");
  }
}

function renderOver(){
  const line=document.getElementById("overLine");
  line.innerHTML="";
  overBalls.forEach(b=>{
    const d=document.createElement("div");
    d.className="ball";
    d.innerText=b;
    line.appendChild(d);
  });
}

function undo(){
  if(!history.length) return;
  const s=JSON.parse(history.pop());
  ({runs,wickets,balls,overBalls,innings,target}=s);
  renderOver();update();
}

let totalOvers=2;
update();
</script>
</body>
</html>
